<!DOCTYPE html>
<html>
	<head>
${{
title ?= "Anonymous"
css ?= "${server.root()}resources/css"
boolean style ?= true
javascript ?= "${server.root()}resources/javascript"
target ?= null
staticTarget ?= null
bundlePath ?= null
[] directories ?= null
# whether or not to use the body for routing
boolean body ?= true
buildTime = date.format('yyyyMMddHHmmssSSS', date: date.date())
additional ?= ""

if (environment("mobile") == true)
	echo('		<meta http-equiv="Content-Security-Policy" content="default-src \'self\' data: gap: cdvfile: https://ssl.gstatic.com \'unsafe-eval\' \'unsafe-inline\'; connect-src \'self\' ws: wss: http: https:; style-src \'self\'; media-src *">')
	echo('		<meta name="format-detection" content="telephone=no">')
	echo('		<meta name="msapplication-tap-highlight" content="no">')
	echo('		<script src="cordova.js"></script>')
}}
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<script src="${javascript}?version=${environment('version')}&build=${buildTime}"></script>
		<link rel="stylesheet" type="text/css" href="${css}?version=${environment('version')}&build=${buildTime}">
		${additional}
		<title>${title}</title>
${{
nabu.utils.tpl(target: target, staticTarget: staticTarget, bundlePath: bundlePath, directories: directories)
}}
	</head>
	<body${when(style, " class='n-default'", "")}>
		${when(!body, "<div id='body'></div>", "")}
	</body>
</html>